import{s as $,M as k}from"./MapContainer-BzXJZQCa.js";import{_ as y,r as u,c as h,a as A,o as g,b as t,t as b,w,v as x,d as I,e as C}from"./index-CCbjbkXc.js";const U={key:0,class:"route-info"},B={class:"info-item"},S={class:"value"},L={class:"info-item"},M={class:"value"},F={class:"info-item"},j={class:"value"},E={class:"info-item"},O={class:"value"},K="9EKBnyQjcyZBnee9HAOKrOXCxltu2htL",N={__name:"RouteInfo",setup(i,{expose:f}){const l=u(null),s=u(null),c=u(null),d=u(null);return f({calculateRoute:async(v,a)=>{var r;try{const n=await $.services.calculateRoute({key:K,locations:`${v.lng},${v.lat}:${a.lng},${a.lat}`,travelMode:"car",traffic:!0,language:"zh-TW"});if(((r=n.routes)==null?void 0:r.length)>0){const p=n.routes[0];return l.value=(p.summary.lengthInMeters/1e3).toFixed(1),s.value=Math.round(p.summary.travelTimeInSeconds/60),c.value=(p.summary.lengthInMeters/1e3/6).toFixed(1),d.value=(c.value*32.2).toFixed(1),{success:!0,route:p}}return!1}catch(n){throw console.error("路線計算失敗:",n),n}}}),(v,a)=>l.value?(g(),h("div",U,[t("div",B,[a[0]||(a[0]=t("span",{class:"label"},"距離:",-1)),t("span",S,b(l.value)+" km",1)]),t("div",L,[a[1]||(a[1]=t("span",{class:"label"},"時間:",-1)),t("span",M,b(s.value)+" 分鐘",1)]),t("div",F,[a[2]||(a[2]=t("span",{class:"label"},"預估油耗:",-1)),t("span",j,b(c.value)+" 升",1)]),t("div",E,[a[3]||(a[3]=t("span",{class:"label"},"預估價錢:",-1)),t("span",O,b(d.value)+" 元 ",1)])])):A("",!0)}},V=y(N,[["__scopeId","data-v-fb3d3037"]]),D={class:"floating-search-panel"},G={class:"search-group"},H=["value"],T={class:"search-group"},z=["value"],Q={key:0,class:"selection-hint"},W={class:"button-group"},X=["disabled"],Y={key:0},Z={key:1},q=["disabled"],J={__name:"SearchPanel",props:{startAddress:String,endAddress:String,activeInput:String,startPoint:Object,endPoint:Object,isLoading:Boolean},emits:["update:activeInput","update:hasRoute","calculate","clear"],setup(i,{emit:f}){const l=i,s=f,c=u(null),d=u(!1),m=r=>{s("update:activeInput",r)},v=async()=>{if(!(!l.startPoint||!l.endPoint)){s("calculate",!0);try{const r=await c.value.calculateRoute(l.startPoint,l.endPoint);r.success&&(d.value=r,s("update:hasRoute",r),s("update:route",r.route))}catch{d.value=!1,s("update:hasRoute",!1)}finally{s("calculate",!1)}}},a=()=>{d.value=!1,s("update:hasRoute",!1),s("clear")};return(r,n)=>(g(),h("div",D,[t("div",G,[n[3]||(n[3]=t("label",null,"出發地:",-1)),t("input",{value:i.startAddress,placeholder:"輸入或點擊地圖選擇",onFocus:n[0]||(n[0]=p=>m("start"))},null,40,H)]),t("div",T,[n[4]||(n[4]=t("label",null,"目的地:",-1)),t("input",{value:i.endAddress,onFocus:n[1]||(n[1]=p=>m("end")),placeholder:"輸入或點擊地圖選擇"},null,40,z)]),i.activeInput?(g(),h("div",Q," 正在選擇"+b(i.activeInput==="start"?"出發地":"目的地")+" - 請點擊地圖 ",1)):A("",!0),w(I(V,{ref_key:"routeInfoRef",ref:c,startPoint:i.startPoint,endPoint:i.endPoint,onCalculate:n[2]||(n[2]=p=>s("calculate"))},null,8,["startPoint","endPoint"]),[[x,d.value]]),t("div",W,[t("button",{class:"calculate-btn",onClick:v,disabled:!i.startPoint||!i.endPoint||i.isLoading},[i.isLoading?(g(),h("span",Z,"計算中...")):(g(),h("span",Y,"計算路線"))],8,X),t("button",{class:"clear-btn",onClick:a,disabled:!d.value}," 清除路線 ",8,q)])]))}},tt=y(J,[["__scopeId","data-v-b1d38020"]]),et={class:"gas-price-container"},st={class:"header"},nt={__name:"GasPrice",setup(i){const f=u(null),l=u(""),s=u(""),c=u(null),d=u(null),m=u(!1),v=u(!1),a=u(null),r=P=>{a.value=P},n=P=>{m.value=P},p=P=>{v.value=P},R=()=>{window.history.back()},_=P=>{l.value="",s.value="",c.value=null,d.value=null,v.value=!1};return(P,e)=>(g(),h("div",et,[t("div",st,[t("button",{class:"back-button",onClick:R},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),t("polyline",{points:"12 19 5 12 12 5"})],-1)])),e[9]||(e[9]=t("h1",null,"油耗計算",-1)),I(C,{id:"oilPrice"})]),I(tt,{startAddress:l.value,"onUpdate:startAddress":e[0]||(e[0]=o=>l.value=o),endAddress:s.value,"onUpdate:endAddress":e[1]||(e[1]=o=>s.value=o),activeInput:f.value,"onUpdate:activeInput":e[2]||(e[2]=o=>f.value=o),startPoint:c.value,endPoint:d.value,isLoading:m.value,hasRoute:v.value,onCalculate:n,"onUpdate:hasRoute":p,onClear:_,"onUpdate:route":r},null,8,["startAddress","endAddress","activeInput","startPoint","endPoint","isLoading","hasRoute"]),I(k,{route:a.value,activeInput:f.value,"onUpdate:activeInput":e[3]||(e[3]=o=>f.value=o),startAddress:l.value,"onUpdate:startAddress":e[4]||(e[4]=o=>l.value=o),endAddress:s.value,"onUpdate:endAddress":e[5]||(e[5]=o=>s.value=o),startPoint:c.value,"onUpdate:startPoint":e[6]||(e[6]=o=>c.value=o),endPoint:d.value,"onUpdate:endPoint":e[7]||(e[7]=o=>d.value=o)},null,8,["route","activeInput","startAddress","endAddress","startPoint","endPoint"])]))}},lt=y(nt,[["__scopeId","data-v-ae549b0e"]]);export{lt as default};
